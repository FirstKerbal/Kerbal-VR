@PROP[switchRotary_Backlight]
{
    // add a JSINumericInput module so the knob knows how to set the persistent variable
    // note this has to come before the VRKnob because it must initialize first because of capturing fields for reflection
    // once things are converted to not use reflection then the order won't matter
    MODULE
    {
        name = JSINumericInput
        perPodPersistenceName = BackLight
        minValue = 0
        maxValue = 1
        defaultValue = 0
    }
}

@PROP:HAS[@MODEL:HAS[#model[ASET/ASET_Props/Control/SwitchRotary/model/Switch_Rotary_Model]]]
{
    MODULE
    {
        name = InternalCollider
        shapeType = Box
        parentTransformName = Switch_Rotary_Model
        colliderTransformName = swRotaryLoc
        boxDimensions = 0.015, 0.03, 0.03
    }

    MODULE
    {
        name = VRKnob
        knobTransformName = swRotaryLoc
        stepCount = 2
    }

    // remove any collider models
    !MODEL:HAS[#model[*Collider*]] {}
}

@PROP:HAS[@MODEL:HAS[#model[ASET/ASET_Props/Control/SwitchRotary/model/Switch_Rotary_3_Marks]]]
{
    @MODULE[VRKnob]
    {
        @stepCount = 3
    }
}

@PROP:HAS[@MODEL:HAS[#model[ASET/ASET_Props/Control/SwitchRotary/model/Switch_Rotary_4_Marks]]]
{
    @MODULE[VRKnob]
    {
        @stepCount = 4
    }
}

@PROP:HAS[@MODEL:HAS[#model[ASET/ASET_Props/Control/SwitchRotary/model/Switch_Rotary_5_Marks]]]
{
    @MODULE[VRKnob]
    {
        @stepCount = 5
    }
}

@PROP:HAS[@MODEL:HAS[#model[ASET/ASET_Props/Control/SwitchRotary/model/Switch_Rotary_6_Marks]]]
{
    @MODULE[VRKnob]
    {
        @stepCount = 6
    }
}

// custom rotation handlers ----------------------------------------------------
// these are necessary for rotary switches that respond to single clicks
// rather than increment/decrement clicks

@PROP:HAS[@MODULE[JSIActionGroupSwitch]:HAS[@PLUGINACTION[JSIInternalRPMButtons]:HAS[#actionMethod[ButtonSpeedMode]]]]
{
    @MODULE[VRKnob]
    {
        %customRotationHandler = SpeedDisplayMode
    }
}

@PROP[ASET_B-Knob-THRUST_LIMIT|THRUST_LIMIT_Selector]
{
    @MODULE[VRKnob]
    {
        %customRotationHandler = ThrustLimit
        @stepCount = 0
    }
}

@PROP[switchRotary_Backlight]
{
    -MODULE[JSIActionGroupSwitch] {}
    
    @MODULE[VRKnob]
    {
        @stepCount = 0
    }
}

@PROP[switchRotary_FlightDeckLight]
{
    @MODULE[VRKnob]
    {
        %customRotationHandler = IntLight
        @stepCount = 0
    }
}
